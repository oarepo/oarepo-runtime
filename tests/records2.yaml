record:
  use:
    - invenio
    - ./files.yaml
  module:
    qualified: records2
  permissions:
    presets: [ 'everyone' ]
  files:
    properties:
      file_title: keyword
    service:
      base-classes: [ oarepo_runtime.services.files.service.FeaturedFileServiceMixin, invenio_records_resources.services.files.service.FileService ]
  record:
    extra-code: |-2
          # extra custom fields for testing ICU sorting and suggesting
          sort = {{oarepo_runtime.records.systemfields.icu.ICUSortField}}(source_field="metadata.title")
          suggest = {{oarepo_runtime.records.systemfields.icu.ICUSuggestField}}(source_field="metadata.title")
          featured = {{oarepo_runtime.records.systemfields.featured_file.FeaturedFileField}}(source_field="metadata.featured")
  search-options:
    base-classes: [ oarepo_runtime.services.search.SearchOptions ]
    sort-options-field: extra_sort_options
    extra-code: |-2
          suggest_parser_cls = {{oarepo_runtime.services.search.ICUSuggestParser}}("records2")
          sort_options = {{oarepo_runtime.services.search.ICUSortOptions}}("records2")
          featured = {{oarepo_runtime.records.systemfields.featured_file.FeaturedFileField}}("records2")

  record-dumper:
    extensions:
      - "{{oarepo_runtime.records.systemfields.SystemFieldDumperExt}}()"

  properties:
    metadata:
     properties:
      featured: flat_object
      title:
       type: keyword
       facets:
        facet-groups: [ 'curator' ]
